<link rel="stylesheet" href="{{root_url}}/public/css/post.css">
<!--<div class="post-side-menu"></div>-->

<img class="post-header-img" src="{{root_url}}/public/img/{{page.img}}" onerror="this.onerror=null; this.src='{{root_url}}/public/img/default.jpg';" />
<div class="post-header-background"></div>
<div class="post-header-date"><span class="material-symbols-outlined">edit_calendar</span>{{page.date | date: "%Y.%m.%d"}}</div>
<div class="post-header-title">{{page.title}}</div>
<div class="post-container">
    <div class="post-content">{{content}}</div>
</div>
<indexnav>
    <navicon><i class="fa-solid fa-list"></i></navicon>
    <navlist class="d-none">
        <navmenu><i class="fa-solid fa-ellipsis"></i><i class="fa-solid fa-xmark"></i></navmenu>
        <navitem></navitem>
    </navlist>
</indexnav>

<!-- 코드 블럭 복사 이벤트 -->
<script>
    $(document).ready(function () {
        const $highlightDiv = $('div.highlight');
        const $button = $('<span class="copy-button"><i class="fa-regular fa-copy"></i> Copy</span>');
        $(document).on('click', '.copy-button', function() { // 이벤트 위임
            const div = $(this).closest('div.highlight');
            const index = div.index('div.highlight');

            const codeText = div.find('code').text();
            navigator.clipboard.writeText(codeText).then(function() {
                $('.copy-button').eq(index).html('<i class="fa-regular fa-copy"></i> Copied');
            }).catch(function(err) {
                console.error('텍스트 복사에 실패했습니다: ', err);
            });
        });

        $highlightDiv.append($button)
    })
</script>

<!-- 사용자 정의 태그 소괄호는 js/custom/latex-with-parentheses-tag.js 에 정의 -->
<script>
    $(document).ready(function () {
        // 전체
        let html = $('.post-content').html()

        // @@ <desc></desc>
        html = html.replace(/@@(.+?)(\r\n|[\s]*\r|\n|$)/g, "<desc>$1</desc>$2");

        // ++ <plus></plus>
        html = html.replace(/\+\+(.+?)(\r\n|[\s]*\r|\n|$)/g, "<plus>$1</plus>$2");

        $(".post-content").html(html);
    })
</script>

<!-- 우측 게시글 nav -->
<script src="{{root_url}}/public/js/custom/post-side-nav.js"></script>

<article class="post">
	{%- assign id = 0 -%}
	{%- for collection in site.collections -%}
	<div class="post-info" id="category-title-{{ collection.label }}">
		<header class="post-header home">
			<div class="category-title">
				<span id='category-name-{{ collection.label }}'>
					{{ collection.label | slice: 0, 1 | upcase }}{{ collection.label | slice: 1, collection.label.size }}
				</span>
			</div>
		</header>
		
		{%- assign docs = collection.docs -%}
		{%- assign count = 0 -%}

		{%- for post in docs -%}
  			{%- assign mod = count | modulo:4 -%}
  			{%- if mod == 0 -%}
    			{%- if count > 0 -%}</ul>{%- endif -%}
    			<ul id="show-{{ collection.label }}-{{ count | divided_by: 3 }}" class="post-list">
  			{%- endif -%}			  
					<input type="hidden" value="{{ post.url | relative_url }}" id="url-{{ id }}" class="post-url" />
					<div class="flex-margin"> </div>
  					<li id="post-list-{{ id }}" class="post-list-item">    								
						<!-- {{ post.url | relative_url }} -->
						<div class="post-title">{{ post.title }}</div>
						<div class="category-content">내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내내용내용내용내용내용내용내</div>
						{%- assign date_format = "%Y/%m/%d" -%}
						<div class="post-date">{{ post.date | date: date_format }}</div>    				
  					</li>
					  <div class="flex-margin"> </div>
			{%- assign id = id | plus: 1 -%}
  			{%- assign count = count | plus: 1 -%}
  			{%- if forloop.last -%}			
			  	{%- if count | modulo: 4 != 0 -%}	
				  {%- assign last = count | modulo: 4 -%}
				  {%- for i in (last..3) -%}
				  <div class="flex-margin"></div><li class="post-list-item-none"> </li><div class="flex-margin"> </div>
				  {%- endfor -%}		
				{%- endif -%}	
				</ul>
			{%- endif -%}
		{%- endfor -%}			
	</div>
	{%- endfor -%}	
</article>

<script src="/public/js/jquery-3.4.1.slim.min.js"></script>
<script>
	$(window).on('hashchange', () => {
		removeCategory();
	});
	$(document).ready(() => {
		removeCategory();

		$('.post-list-item').click(function() {
			let no = this.id.split('-')[2]
			let url_id = `url-${no}`
			window.location.href = $(`#${url_id}`).val()
		})
	})

	function removeCategory() {
		if (window.location.hash) {
			let hash = window.location.hash.substring(1);

			let titles = $(`.post-info`).each((i, e) => {
				if (e.id == `category-title-${hash}`) {
					$(e).show();
				} else {
					$(e).hide();
				}
			})
		}
	}
</script>